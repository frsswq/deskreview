---
import Card from "../components/Card.astro";
import WorkSlider from "../components/WorkSlider.astro";
import { workCardData } from "../data/workCardData";

// Helper function to split data into chunks
const chunkData = (data, sizes) => {
  let chunks = [];
  let i = 0;
  while (i < data.length) {
    const chunkSize = sizes[chunks.length % sizes.length];
    chunks.push(data.slice(i, i + chunkSize));
    i += chunkSize;
  }
  return chunks;
};

// Alternate between 2 and 3 columns
const gridSizes = [2, 3];
const chunkedData = chunkData(workCardData, gridSizes);
---

<div class="flex flex-col pb-10 md:mx-[10vw]">
  {
    chunkedData.map((chunk, index) => (
      <div
        class={`grid w-full gap-x-4 gap-y-10 px-4 pb-8 md:gap-y-8 ${
          index % 2 === 0 ? "md:grid-cols-2" : "md:grid-cols-3" }`}
      >
        {chunk.map((card) => (
          <Card {...card} />
        ))}
      </div>
    ))
  }
</div>

<WorkSlider />
