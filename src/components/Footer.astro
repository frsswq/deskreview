---
import { Icon } from "astro-icon/components";

const { withFooter } = Astro.props;

const linkHover = "hover:text-desk-gray-300 hover:underline";
---

<footer
  class={withFooter
    ? `h-[calc(100vh-52px)] fixed bottom-0 left-0 -z-50 w-full bg-desk-black
      text-desk-white antialiased`
    : "hidden"}
>
  <div
    id="footer-content"
    class="flex h-full flex-col items-center justify-center font-AreaNormal text-sm
      will-change-transform"
  >
    <Icon name="logo_icon" class="w-full h-[35vh] pb-10 pr-4" />
    <div class="flex flex-row space-x-2">
      <a
        href="https://www.instagram.com/deskreview/"
        target="_blank"
        class={`${linkHover}`}>Instagram</a
      >
      <div>/</div>
      <a href="mailto:zaidandzaki@gmail.com" target="_blank" class={`${linkHover}`}
        >Email</a
      >
      <div>/</div>
      <a href="https://wa.me/+6285159177206" target="_blank" class={`${linkHover}`}
        >WhatsApp</a
      >
    </div>

    <p class="pt-2">Copyright &copy; 2024 Deskreview</p>
  </div>
</footer>

<script>
  document.addEventListener("astro:page-load", () => {
    const footerContent = document.getElementById("footer-content");
    window.onscroll = () => {
      if (
        window.innerHeight + Math.round(window.scrollY) >=
        document.body.offsetHeight
      ) {
        const footerStartPoint =
          document.body.offsetHeight - window.innerHeight;
        const footerHeight = footerContent.offsetHeight;
        const scrollProgress = Math.max(
          0,
          Math.min(
            footerHeight,
            footerHeight - (window.scrollY - footerStartPoint)
          )
        );
        // set translateY with this
        const translateVh = (scrollProgress / footerHeight) * 15;
        footerContent.style.transform = `translateY(${translateVh}vh)`;
      } else {
        footerContent.style.transform = "translateY(15vh)";
      }
    };
  });
</script>
